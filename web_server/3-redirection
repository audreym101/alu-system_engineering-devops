#!/usr/bin/env bash
#!/bin/bash
# This script installs Nginx and configures a 301 redirect from /redirect_me to a specified URL

# Step 1: Update package list and install Nginx if it's not already installed
sudo apt update
sudo apt install -y nginx

# Step 2: Configure Nginx to add a 301 redirect for /redirect_me
# Append the redirect rule directly into the server block of the default config file
sudo bash -c 'cat << EOF >> /etc/nginx/sites-available/default

server {
    listen 80 default_server;
        listen [::]:80 default_server;

	    server_name _;

	        location /redirect_me {
		        return 301 https://www.youtube.com/watch?v=QH2-TGUlwu4;
			    }
	    }
    EOF'

    # Step 3: Restart Nginx to apply the new configuration
    sudo systemctl restart nginx

    echo "Nginx has been configured with a 301 redirect for /redirect_me"
